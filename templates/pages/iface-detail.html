{{define "iface-detail.html"}}
{{template "base" .}}
{{end}}

{{define "content"}}
<div class="iface-detail-header">
  <a href="/interfaces" hx-get="/interfaces" hx-target="#content" hx-push-url="true" class="back-link">&larr; Interfaces</a>
  <h2>{{.Name}}</h2>
</div>

<div class="info-grid">
  <section class="info-card">
    <h2>Interface Info</h2>
    <table class="info-table">
      <tr><th>Name</th><td>{{.Name}}</td></tr>
      <tr><th>Type</th><td>{{.Type}}</td></tr>
      <tr><th>Index</th><td>{{.IfIndex}}</td></tr>
      <tr>
        <th>Status</th>
        <td><span class="status-dot {{if .StatusUp}}status-up{{else}}status-down{{end}}"></span>{{.Status}}</td>
      </tr>
      {{if .PhysAddr}}<tr><th>MAC Address</th><td>{{.PhysAddr}}</td></tr>{{end}}
      {{if .MTU}}<tr><th>MTU</th><td>{{.MTU}}</td></tr>{{end}}
      {{if .Speed}}<tr><th>Speed</th><td>{{.Speed}}</td></tr>{{end}}
      {{if .Duplex}}<tr><th>Duplex</th><td>{{.Duplex}}</td></tr>{{end}}
      {{if .AutoNeg}}<tr><th>Auto-negotiation</th><td>{{.AutoNeg}}</td></tr>{{end}}
      {{if .Detail}}<tr><th>Detail</th><td>{{.Detail}}</td></tr>{{end}}
    </table>
    {{if .Addresses}}
    <h3>Addresses</h3>
    <table class="info-table">
      {{range .Addresses}}
      <tr>
        <td>{{.Address}}{{if .Origin}} <span class="addr-origin">({{.Origin}})</span>{{end}}</td>
      </tr>
      {{end}}
    </table>
    {{end}}
  </section>

  <section class="info-card">
    <h2>Counters</h2>
    {{template "iface-counters" .}}
  </section>
</div>

{{if .WiFiStations}}
<section class="info-card">
  <h2>Connected Stations</h2>
  <table class="disk-table">
    <thead>
      <tr>
        <th>MAC</th>
        <th>Signal</th>
        <th>Time</th>
        <th>RX Pkts</th>
        <th>TX Pkts</th>
        <th>RX Bytes</th>
        <th>TX Bytes</th>
        <th>RX Speed</th>
        <th>TX Speed</th>
      </tr>
    </thead>
    <tbody>
      {{range .WiFiStations}}
      <tr>
        <td>{{.MAC}}</td>
        <td>{{if .Signal}}<span class="signal-{{.SignalCSS}}">{{.Signal}}</span>{{end}}</td>
        <td>{{.Time}}</td>
        <td>{{.RxPkts}}</td>
        <td>{{.TxPkts}}</td>
        <td>{{.RxBytes}}</td>
        <td>{{.TxBytes}}</td>
        <td>{{.RxSpeed}}</td>
        <td>{{.TxSpeed}}</td>
      </tr>
      {{end}}
    </tbody>
  </table>
</section>
{{end}}

{{if .WGPeers}}
<section class="info-card">
  <h2>WireGuard Peers</h2>
  {{range .WGPeers}}
  <div class="wg-peer">
    <table class="info-table">
      <tr><th>Public Key</th><td class="key-full">{{.PublicKey}}</td></tr>
      <tr>
        <th>Status</th>
        <td><span class="status-dot {{if .StatusUp}}status-up{{else}}status-down{{end}}"></span>{{.Status}}</td>
      </tr>
      {{if .Endpoint}}<tr><th>Endpoint</th><td>{{.Endpoint}}</td></tr>{{end}}
      {{if .Handshake}}<tr><th>Latest Handshake</th><td>{{.Handshake}}</td></tr>{{end}}
      {{if .TxBytes}}<tr><th>Transfer TX</th><td>{{.TxBytes}}</td></tr>{{end}}
      {{if .RxBytes}}<tr><th>Transfer RX</th><td>{{.RxBytes}}</td></tr>{{end}}
    </table>
  </div>
  {{end}}
</section>
{{end}}

{{if .EthFrameStats}}
<section class="info-card">
  <h2>Ethernet Frame Statistics</h2>
  <dl class="eth-stats">
    {{range .EthFrameStats}}
    <div class="eth-stats-row">
      <dt>{{.Key}}</dt>
      <dd>{{.Value}}</dd>
    </div>
    {{end}}
  </dl>
</section>
{{end}}
{{end}}
